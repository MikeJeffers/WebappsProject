{% extends "form.html" %}

{% block extras %}
    {% load staticfiles %}
    <link href="{% static 'widgets/datepicker/jquery.datepick.css' %}" rel="stylesheet">
    <link href="{% static 'widgets/timepicker/jquery.timepicker.css' %}" rel="stylesheet">
    <link href="{% static 'widgets/colorpicker/spectrum.css' %}" rel="stylesheet">
    <link href="{% static 'framework/css/appForm.css' %}" rel="stylesheet">
    <script src="{% static 'widgets/datepicker/jquery.datepick.js' %}"></script>
    <script src="{% static 'widgets/timepicker/jquery.timepicker.js' %}"></script>
    <script src="{% static 'widgets/colorpicker/spectrum.js' %}"></script>
{% endblock %}

{% block before %}
        <div id="panel{{appSetting.id}}" class="panel" style="background-color:{{appSetting.color}};">
            <h2>{{appSetting.app.name}}</h2>
{% endblock %}

{% block after %}
    </div>
    <script>
        $(function() {
            $( ".datepicker" ).datepicker();
            $( ".timepicker" ).timepicker();
            $( "#panel{{appSetting.id}} .colorpicker" ).spectrum({
                color: "{{appSetting.color}}",
                change: function(color) {}
            });
        });

    function deleteButtonAction(event, id) {
    	event.preventDefault();
    	$.post("{% url 'removeapp' %}", {"appSettingID": id, 'csrfmiddlewaretoken': '{{ csrf_token }}'}, function(response){
    		$.load("{% url 'removeapp' %}");
    	});
    }
</script>
{% endblock %}

{% block action %}{% url 'form_to_json' %}{% endblock %}

{% block onSubmit %}submitted(event){% endblock %}
{% block onDelete %}deleteButtonAction(event, {{settings_id}}){% endblock %}